<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=devce-width, initial-scale=1">
    <title>Manual Concepts</title>
    <style>
        @font-face {
            font-family: RodinNTLG;
            src: url(/assets/fonts/CTRNTLG-DB.ttf);
        }
        :root {
            --index-bar-width: 300px;
            --index-bar-off: 0px;
            --pageheader-border-radius: 8px;
        }

        ::-webkit-scrollbar {
            width: 6px;
            background-color: transparent;
        }
        ::-webkit-scrollbar-thumb {
            border-radius: 100vw;
            background-color: white;
            min-height: 32px;
        }
        body {
            background: rgb(32, 36, 52);
            margin: 0;
            font-size: 14px;
        }
        div#content {
            max-width: 100vw;
            max-height: 100vw;
            overflow: hidden;
            padding: 0;
            margin: 0;
        }
        body, button {
            font-family: RodinNTLG, "nintendo_NTLG-DB_002", "nintendo_NTLG-DB_001", sans-serif;
        }

        #index {
            position: fixed;
            display: flex;
            flex-direction: column;
            width: var(--index-bar-width);
            height: calc(100% - 16pt);
            padding: 8pt 0pt;
            left: var(--index-bar-off);
            opacity: 1;
            transition: all 333ms ease-in-out;
            top: 0px;
            border-radius: 0px 12pt 12pt 0;
            background-color: rgba(255, 255, 255, .75);
            backdrop-filter: blur(3pt);
            box-shadow:
                0px 0px 64pt black,
                0px 0px 64pt black;
            overflow: hidden;
        }
        #index.hidden {
            box-shadow: 0px 0px 0pt black;
            background-color: rgba(255, 255, 255, 1);
            opacity: 0;
        }

        #page {
            position: fixed;
            display: flex;
            flex-flow: column;
            transition: width 500ms ease-in-out;
            width: calc(100vw - var(--index-bar-width) - var(--index-bar-off) + 16px);
            min-width: 336px;
            max-width: calc(100vw + 16px);
            height: 100%;
            right: -16px;
            top: 0px;
            user-select: none;
            overflow: hidden;
        }

        #pageHeader {
            transition: background-color 250ms ease, border-radius 333ms ease, box-shadow 500ms ease;
            align-self: center;
            background: linear-gradient(176.6deg, #fff2 0%, #fff8 45%, #fff0 55%, #fff4 100%);
            background-color: rgba(64, 72, 96, 0.5);
            position: absolute;
            display: flex;
            flex-flow: row;
            backdrop-filter: blur(3px);
            top: 0px;
            width: 320px;
            margin-right: 16px;
            height: 40px;
            border-radius: 0 0 var(--pageheader-border-radius) var(--pageheader-border-radius);
            box-shadow: 0px 0px 12px black;
            vertical-align: baseline;
        }
        .currPageLabel {
            padding: 3px;
        }
        #pageHeader:hover {
            background-color: rgba(160, 255, 255, .5);
        }
        #pageHeader:active {
            background-color: rgba(128, 160, 192, .5);
        }

        .pageCount {
            display: table-cell;
            margin: 6px;
            width: 28px;
            height: 28px;
            border-radius: 8px;
            background: royalblue;
            color: white;
            align-self: top;
        }

        .cat1 {
            background: #e88480;
        }

        .cat2 {
            background: #98d068;
        }

        .cat3 {
            background: #70b4d8;
        }

        .cat4 {
            background: #e0c858;
        }

        .cat5 {
            background: #9888d0;
        }

        .cat6 {
            background: #b0b860;
        }

        .cat7 {
            background: #90a8e8;
        }

        .cat8 {
            background: #e89070;
        }

        .cat9 {
            background: #78ccb0;
        }

        .cat10 {
            background: #d09cd0;
        }

        .cat11 {
            background: #d8b060;
        }

        .cat12 {
            background: #a0bcb8;
        }

        .pageCount div {
            display: table-cell;
            vertical-align: middle;
            text-align: center;
            width: 28px;
            height: 28px;
            text-shadow:
                0pt 0.0pt 0.5pt #000,
                0pt 0.125pt 1.0pt #000,
                0pt 0.25pt 1.5pt #000,
                0pt 0.5pt 2pt #000;
        }

        #pageHeader .pageCount {
            box-shadow:
                0px 0px 4px white,
                0px 0px 4px white;
        }

        .pageLabel div {
            display: table-cell;
            height: 32px;
            padding: 4px 4px;
            vertical-align: middle;
            overflow-x: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            max-width: 278px;
            text-shadow:
                -1.5px  1.5px 2px white,
                 0.0px  2.0px 2px white,
                 1.5px  1.5px 2px white,
                -2.0px  0.0px 2px white,
                 2.0px  0.0px 2px white,
                -1.5px -1.5px 2px white,
                 0.0px -2.0px 2px white,
                 1.5px -1.5px 2px white,
                 0.0px  4.0px 4px white;
        }

        #page iframe {
            position: absolute;
            top: -40px;
            margin-top: 40px;
            width: 336px;
            height: 100%;
            background-color: clear;
            border: none;
            align-self: center;
            transition: opacity 125ms ease;
            opacity: 1;
        }
        #page iframe.hidden {
            opacity: 0;
        }

        #pageList {
            display: block;
            width: calc(100% - 16pt);
            flex-grow: 1;
            overflow-y: hidden;
            margin: 8pt;
            padding: 0;
            background: #0004;
            border-radius: 4px;
        }

        #pageList .listcontent {
            width: calc(100% - 8pt);
            height: calc(100% - 16pt);
            scrollbar-gutter: both-edges stable;
            scrollbar-color: white transparent;
            overflow-x: hidden;
            overflow-y: scroll;
            padding: 8pt 4pt;
        }

        #pageList .category {
            display: flex;
            flex-flow: row;
            height: 20px;
            text-align: center;
            border: none;
            border-radius: 8pt;
            padding: 4px 0pt;
            margin: 4px 0pt;
            text-shadow: 0pt 1pt 2pt #000;
            box-shadow: 0px -9px 12px #0008 inset;
            color: white;
        }

        #pageList .category div {
            display: block;
            width: calc(100% - 8pt);
            padding: 4pt 4pt;
            align-self: center;
            color: white;
            text-overflow: ellipsis;
            overflow-x: hidden;
        }
        #pageList .category div.dowrap {
            white-space: unset;
        }

        #pageList .listcontent button {
            width: 100%;
            transition: transform 100ms ease, background-color 100ms ease;
            display: flex;
            flex-flow: row;
            border: none;
            border-radius: 8pt;
            padding: 0pt;
            margin: 4px 0pt;
            font-size: 14px;
            box-shadow: 0px -2pt 6pt #0008 inset;
            background-color: white;
        }
        #pageList .listcontent button:hover {
            background-color: #EEE;
            transform: scale(1.03125);
        }
        #pageList .listcontent button:active {
            background-color: #CCC;
            transform: scale(.96875);
        }
        #indexToggle {
            width: calc(100% - 16pt);
            display: block;
            border: none;
            border-radius: 8pt;
            padding: 4pt;
            margin: 0;
            margin-left: 8pt;
            font-size: 14px;
            background-color: #444;
            color: white;
        }
        #indexToggle:hover {
            background-color: #555;
        }

        #pageList .listcontent button * {
            align-self: center;
        }

        #pageList .pageLabel {
            max-width: calc(100% - 44px);
            text-overflow: ellipsis;
            overflow-x: hidden;
        }

        h1 {
            font-size: 24px;
            text-align: center;
            color: transparent;
            background: linear-gradient(15deg, #cf0 0%, #08f 100%);
            background-clip: text;
            -webkit-background-clip: text;
            text-shadow: 0px 1pt 1pt rgba(0, 0, 0, .333);
        }

        h2, h3, h4, h5, h6 {
            text-align: center;
            text-shadow: 0px .15rem 1pt #fff;
        }

        h1, h2, h3, h4, h5, h6 {
            margin: 4pt 0pt;
        }

        h2 {
            font-size: 22px;
        }

        h3 {
            font-size: 20px;
        }

        h4 {
            font-size: 18px;
        }

        h5 {
            font-size: 16px;
        }

        h6 {
            font-size: 14px;
        }
    </style>
</head>

<body>
    <div id="content">
        <div id="page">
            <iframe id="pageframe"></iframe>
            <div id="pageHeader" onclick="toggleIndex()" title="Click here to toggle the index panel.">
                <div id="currPageCat" class="pageCount">
                    <div id="currPageNum">…</div>
                </div>
                <div class="pageLabel">
                    <div id="currPageLabel">Loading…</div>
                </div>
            </div>
        </div>
        <div id="index">
            <h1>Manual Concepts</h1>
            <h4>Table Of Contents</h4>
            <div id="pageList">
                <div id="pageListC" class="listcontent">
                    <button type="button" onclick="newPage(0,0)">
                        <div class="pageCount cat01">
                            <div>0</div>
                        </div>
                        <div class="pageLabel">
                            Introduction Page
                        </div>
                    </button>
                    <hr>
                </div>
            </div>
            <button id="indexToggle" onclick="toggleIndex()">Hide this panel</button>
        </div>
    </div>
    <script>
        pages = [
            ["Introduction Page", "./pageDummy.html"],
            ["Important Information", "./pages/001.html"],
            ["Introduction", "./pages/intro.html"],
            ["Main Menu", "./pages/lncMain.html"],
            ["Updates", "./pages/lncUpd.html"],
            ["Settings", "./pages/lncSet.html"],
            ["Main Menu", "./pages/plgMain.html"],
            ["{Test1}", "./pages/test1.html"],
            ["{Test2}", "./pages/test2.html"],

            ["Support Information", "./pages/contact.html"],
            ["Special – Top Page", "./pages/specHome.html"],
            ["Credits", "./pages/credits.html"],
            ["OSS Licenses", "./pages/licenses.html"],
        ]
        categories = {
            2: "Getting Started",
            3: "Manager & Updater",
            6: "The CYX Plugin",
            
            7: "[STANDING BY]",

            9: "Support Information",
            10: "Special (Credits)",
        }
        root = document.querySelector(":root")
        firstLoad = 0
        function newPage(num, cat) {
            currPageNum.innerText = num
            currPageCat.classList = ["pageCount cat" + ((cat - 1) % 12 + 1)]
            currPageLabel.innerText = pages[num][0]
            window.setTimeout(function(){
                pageframe.src = pages[num][1]
            }, 333)
            pageframe.classList = "hidden"
            root.style.setProperty("--pageheader-border-radius", "12px")
        }

        function toggleIndex() {
            let indiv = document.getElementById("index")
            let is = getComputedStyle(root).getPropertyValue("--index-bar-width")
            is = Number.parseInt(is.substring(0,is.length-2))
            let i = getComputedStyle(root).getPropertyValue("--index-bar-off")
            i = Number.parseInt(i.substring(0,i.length-2))
            if (!i) {
                i = -is
                indiv.classList = "hidden"
            } else {
                i = 0
                indiv.classList = ""
            }
            root.style.setProperty("--index-bar-off", i+"px")
        }
        function setIndexToggle(bool) {
            let indiv = document.getElementById("index")
            let is = getComputedStyle(root).getPropertyValue("--index-bar-width")
            is = Number.parseInt(is.substring(0,is.length-2))
            let i = getComputedStyle(root).getPropertyValue("--index-bar-off")
            i = Number.parseInt(i.substring(0,i.length-2))
            if (bool) {
                i = -is
                indiv.classList = "hidden"
            } else {
                i = 0
                indiv.classList = ""
            }
            root.style.setProperty("--index-bar-off", i+"px")
        }

        function setup() {
            let ccat = 0
            let ccatR = 0;
            for (let i = 1; i < pages.length; i++) {
                if (categories[i] != null) {
                    if (i) ccat++;
                    let ccatR = ((ccat) % 12 + 1)
                    let d1 = document.createElement("div")
                    d1.classList = "category cat" + ccatR
                    let d2 = document.createElement("div")
                    d2.innerText = categories[i];
                    d1.append(d2)
                    pageListC.append(d1)
                }
                let ccatR = ((ccat) % 12 + 1)
                let b1 = document.createElement("button")
                let d1 = document.createElement("div")
                d1.classList = "pageCount cat" + ccatR
                let d11 = document.createElement("div")
                d11.innerText = i
                let d2 = document.createElement("div")
                d2.innerText = pages[i][0]
                d1.append(d11)
                b1.append(d1)
                b1.append(d2)
                b1.pcat = ccat + 1
                b1.pnum = i
                b1.onclick = function(){newPage(b1.pnum, b1.pcat)}
                pageListC.append(b1)
            }
            if (pages.length < 2) {
                let d1 = document.createElement("div")
                d1.classList = "category cat1"
                let d2 = document.createElement("div")
                d2.classList = "doWrap"
                d2.innerText = "There are no pages present.\nCheck again later.";
                d1.append(d2)
                pageListC.append(d1)
            }
            pageframe.onload = function(){ // iframe loads in - we don't care about it
                pageframe.onload = function(){
                    if (window.visualViewport.width < 640) {
                        setIndexToggle(firstLoad)
                    }
                    firstLoad = 1
                    pageframe.classList = ""
                    root.style.setProperty("--pageheader-border-radius", "0px")
                }
            }
        }

        setup();
        newPage(0,0)

    </script>
</body>
</html>